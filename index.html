<!--
 Action Steps
  done - 1) Create button that updates feed list
  done - 2) Auto refresh every second instead of button
  done- 3) Show timestamps in a readable format
  4) Make usernames clickable to show individual feeds
  5) Make it pretty

  Advanced
  1) Make timestamps user-friendly(use some library)
  2) Allow user to tweet
-->
<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <button id = "sd">Click for Shawn Drost Feed</button>
    <button id = "home">Click for Complete Feed</button>
    <div id ="feed"></div>

    <script>

      // var updateFeed = function(){
      //   var $feed = $('#feed');
      //   $feed.html('');

      //   var index = streams.home.length - 1;        
      //   while(index >= 0){
      //     var tweet = streams.home[index];
      //     var time = tweet.created_at.getHours() + ":" + tweet.created_at.getMinutes() + ":" + tweet.created_at.getSeconds();
      //     var $tweet = $('<div class = "tweeted"></div>');
      //     $tweet.html("@ <a href = '#'>" + tweet.user + "</a> : " + tweet.message + " at " + time);
      //     $tweet.appendTo($feed);
      //     index -= 1;
      //   }
      // }

      var updateFeed = function(streamOrUser){
        var $feed = $('#feed');
        $feed.html('');

        var index = streamOrUser.length - 1;   
        var stop = index >= 15 ? index - 14 : 0;

        for(index; index >= stop; index --) {    
          var tweet = streamOrUser[index];
          var time = tweet.created_at.getHours() + ":" + tweet.created_at.getMinutes() + ":" + tweet.created_at.getSeconds();
          var $tweet = $('<div class = "tweeted"></div>');
          $tweet.html("@ <a href = '#' class='userLink'>" + tweet.user + "</a> : " + tweet.message + " at " + time);
          $tweet.appendTo($feed);
        }
      }

      $(document).ready(function(){
        var snippet = streams.home;  //streams.home or streams.users.<username>
        
        $('#sd').on('click', function(){
          snippet = streams.users.shawndrost;
          updateFeed(snippet);
        });
        $('#home').on('click', function(){
          snippet = streams.home;
          updateFeed(snippet);
        });
        
        updateFeed(snippet);

        setInterval(function(){updateFeed(snippet)}, 1000);



      });


    </script>
  </body>
</html>
